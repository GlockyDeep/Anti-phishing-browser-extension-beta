<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Anti-Phish Guard</title>
  <style>
    :root {
      --bg: #ffffff;
      --muted: #6b7280;
      --accent: #0b5cff;
      --danger: #d9534f;
      --card: #f8fafc;
      --border: #e6e6e6;
      --radius: 8px;
      --pad: 12px;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    body { background: var(--bg); color: #111827; width: 360px; margin: 0; padding: 14px; box-sizing: border-box; }
    header { display:flex; gap:10px; align-items:center; }
    header h3 { margin:0; font-size:16px; }
    .subtitle { font-size:12px; color:var(--muted); margin-top:4px; }
    .card { background: var(--card); padding: 10px; border: 1px solid var(--border); border-radius: var(--radius); margin-top:12px; }
    label { display:flex; align-items:center; gap:8px; }
    .row { display:flex; align-items:center; gap:8px; margin-top:10px; }
    .controls { display:flex; gap:8px; margin-top:12px; }
    button { cursor:pointer; border: none; padding: 8px 12px; border-radius:6px; }
    .btn-primary { background: var(--accent); color: white; }
    .btn-danger { background: var(--danger); color: white; }
    .btn-muted { background: #f0f2f7; color: #111827; }
    .api-input { width:100%; box-sizing:border-box; padding:8px; margin-top:8px; font-family:monospace; border-radius:6px; border:1px solid var(--border); }
    .small { font-size:12px; color:var(--muted); margin-top:8px; }
    #allowlist { font-size: 12px; margin-top: 8px; max-height: 120px; overflow:auto; border:1px solid var(--border); padding:8px; background: #fff; border-radius:6px; }
    .host-row { display:flex; justify-content:space-between; gap:8px; padding:6px 0; border-bottom:1px solid #f3f4f6; }
    .host-row button { font-size:12px; padding:4px 8px; }
    .footer { font-size:11px; color:var(--muted); margin-top:10px; text-align:left; }
    .warning { font-size:12px; color:#b45309; margin-top:8px; }
  </style>
</head>
<body>
  <header>
    <img src="icons/icon48.svg" width="28" height="28" alt="">
    <div>
      <h3>Anti-Phish Guard</h3>
      <div class="subtitle">Pre-visit phishing protection (prototype)</div>
    </div>
  </header>

  <div class="card">
    <label><input id="toggle" type="checkbox" /> Enabled</label>

    <div class="row" style="margin-top:8px;">
      <label style="margin:0;"><input id="useCloud" type="checkbox" /> Use cloud lookup (Safe Browsing proxy)</label>
    </div>
    <div class="small">Run the proxy at <code>http://localhost:3000</code> and enable this option.</div>

    <div style="margin-top:8px;">
      <label style="margin:0;"><input id="useDirect" type="checkbox" /> Use direct Safe Browsing lookup (embed API key)</label>
      <input id="apiKey" class="api-input" type="password" placeholder="Paste Safe Browsing API key (insecure)" />
      <div class="small">Only use direct lookup for temporary testing. Do NOT publish with a real key.</div>
    </div>

    <div style="margin-top:10px;">
      <label style="margin:0;"><input id="useSafeOnly" type="checkbox" /> Use Google Safe Browsing only (skip local DB for navigations)</label>
      <div class="small">When enabled, navigations will prefer Google Safe Browsing instead of local blocklist/urlhaus. Requires direct API key for true "Google-only" operation.</div>
      <div id="safeOnlyWarning" class="warning" style="display:none;">No direct API key set. Enable "Use direct lookup" and paste an API key to guarantee Google-only checks.</div>
    </div>

    <div class="controls" style="margin-top:12px;">
      <button id="reportBtn" class="btn-danger">Report this website</button>
      <button id="refreshFeeds" class="btn-muted">Refresh feeds</button>
    </div>

  </div>

  <div style="margin-top:12px;">
    <strong>Allowlist</strong>
    <div id="allowlist">(none)</div>
    <div class="small">Use the warning page's "Allow and proceed" to add a host, or remove entries below.</div>
  </div>

  <div class="footer">
    Host-only reporting and logs are used only for local testing. See README for details.
  </div>

  <script src="popup.js"></script>
</body>
</html>